{"version":3,"file":"filterStyles.native.js","sourceRoot":"","sources":["../src/filterStyles.native.ts"],"names":[],"mappings":"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","sourcesContent":["import { StyleSheet } from \"react-native\";\nimport { parseBoxShadow } from \"./parseBoxShadow\";\n\nconst WEB_STYLES = [\n  \"backdropFilter\",\n  \"animationDelay\",\n  \"animationDirection\",\n  \"animationDuration\",\n  \"animationFillMode\",\n  \"animationName\",\n  \"animationIterationCount\",\n  \"animationPlayState\",\n  \"animationTimingFunction\",\n  \"backgroundAttachment\",\n  \"backgroundBlendMode\",\n  \"backgroundClip\",\n  \"backgroundImage\",\n  \"backgroundOrigin\",\n  \"backgroundPosition\",\n  \"backgroundRepeat\",\n  \"backgroundSize\",\n  // \"boxShadow\",\n  \"boxSizing\",\n  \"clip\",\n  \"cursor\",\n  \"filter\",\n  \"gridAutoColumns\",\n  \"gridAutoFlow\",\n  \"gridAutoRows\",\n  \"gridColumnEnd\",\n  \"gridColumnGap\",\n  \"gridColumnStart\",\n  \"gridRowEnd\",\n  \"gridRowGap\",\n  \"gridRowStart\",\n  \"gridTemplateColumns\",\n  \"gridTemplateRows\",\n  \"gridTemplateAreas\",\n  \"outline\",\n  \"outlineColor\",\n  \"overflowX\",\n  \"overflowY\",\n  \"overscrollBehavior\",\n  \"overscrollBehaviorX\",\n  \"overscrollBehaviorY\",\n  \"perspective\",\n  \"perspectiveOrigin\",\n  \"touchAction\",\n  \"transformOrigin\",\n  \"transitionDelay\",\n  \"transitionDuration\",\n  \"transitionProperty\",\n  \"transitionTimingFunction\",\n  \"userSelect\",\n  // \"visibility\",\n  \"willChange\",\n\n  // Custom styles\n  //   \":hover\",\n  //   \":active\",\n  //   \":focus\",\n];\n\nexport function filterStyles(styleProp = {}) {\n  const style = StyleSheet.flatten(styleProp);\n\n  const filteredStyle = Object.fromEntries(\n    Object.entries(style).filter(([k]) => !WEB_STYLES.includes(k))\n  );\n\n  if (filteredStyle.position === \"fixed\") {\n    filteredStyle.position = \"absolute\";\n  }\n\n  return processNativeStyles(filteredStyle);\n}\n\nfunction processNativeStyles(style) {\n  if (!style) return style;\n\n  if (typeof style.aspectRatio === \"string\") {\n    // Match `1 / 2.0`, `2.0/   4`\n    const trimmed = style.aspectRatio.trim();\n    // Single number as a string\n    if (!trimmed.match(/^(\\d+(?:\\.\\d+)?)$/)) {\n      const components = trimmed.match(\n        /^(\\d+(?:\\.\\d+)?)(?:\\s+)?\\/(?:\\s+)?(\\d+(?:\\.\\d+)?$)$/\n      );\n      if (components && components[1] && components[2]) {\n        const first = parseFloat(components[1]);\n        const second = parseFloat(components[2]);\n        style.aspectRatio = first / second;\n      } else {\n        console.warn(`Unsupported aspectRatio: '${style.aspectRatio}'`);\n        style.aspectRatio = undefined;\n      }\n    }\n  }\n  if (style.visibility) {\n    if (style.visibility === \"hidden\") {\n      style.display = \"none\";\n    }\n    delete style.visibility;\n  }\n  if (style.boxShadow) {\n    const shadows = parseBoxShadow(style.boxShadow);\n    delete style.boxShadow;\n\n    // Get first shadow that isn't inset\n    const first = shadows.find((shadow) => !shadow.inset);\n    // TODO: Need some system for rendering the shadows.\n\n    if (first) {\n      style.shadowOpacity = 1.0;\n      style.shadowColor = first.color;\n      style.shadowOffset = {\n        width: first.x,\n        height: first.y,\n      };\n\n      // iOS trick https://sarunw.com/posts/match-view-shadow-to-sketch-shadow/\n      style.shadowRadius = first.blur * 0.5;\n    }\n  }\n\n  if (style.position) {\n    if (style.position === \"fixed\") {\n      style.position = \"absolute\";\n    } else if (![\"absolute\", \"relative\"].includes(style.position)) {\n      console.warn(`Unsupported position: '${style.position}'`);\n      style.position = \"relative\";\n    }\n  }\n\n  return style;\n}\n"]}